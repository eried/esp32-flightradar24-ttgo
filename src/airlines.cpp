#include <airlines.h>
#include <airline_logos.h>
#include <binary_search.h>

// List must be sorted because binary search is used

static const airline_t airlines[] = {
    {"AAA", &airline_logo_AAA},
    {"AAH", &airline_logo_AAH},
    {"AAL", &airline_logo_AAL},
    {"AAR", &airline_logo_AAR},
    {"ACA", &airline_logo_ACA},
    {"AFL", &airline_logo_AFL},
    {"AFR", &airline_logo_AFR},
    {"AIC", &airline_logo_AIC},
    {"AIJ", &airline_logo_AIJ},
    {"AJM", &airline_logo_AJM},
    {"ALK", &airline_logo_ALK},
    {"AMC", &airline_logo_AMC},
    {"AMT", &airline_logo_AMT},
    {"AMU", &airline_logo_AMU},
    {"AMX", &airline_logo_AMX},
    {"ANA", &airline_logo_ANA},
    {"ANZ", &airline_logo_ANZ},
    {"ARG", &airline_logo_ARG},
    {"ASA", &airline_logo_ASA},
    {"ASQ", &airline_logo_ASQ},
    {"ATC", &airline_logo_ATC},
    {"AUA", &airline_logo_AUA},
    {"AVA", &airline_logo_AVA},
    {"AWE", &airline_logo_AWE},
    {"AZA", &airline_logo_AZA},
    {"AZU", &airline_logo_AZU},
    {"BAW", &airline_logo_BAW},
    {"BEE", &airline_logo_BEE},
    {"BER", &airline_logo_BER},
    {"BLC", &airline_logo_BLC},
    {"BMA", &airline_logo_BMA},
    {"BOE", &airline_logo_BOE},
    {"BTA", &airline_logo_BTA},
    {"BWA", &airline_logo_BWA},
    {"CAL", &airline_logo_CAL},
    {"CCA", &airline_logo_CCA},
    {"CES", &airline_logo_CES},
    {"CHH", &airline_logo_CHH},
    {"CJT", &airline_logo_CJT},
    {"CLH", &airline_logo_CLH},
    {"CLX", &airline_logo_CLX},
    {"CMP", &airline_logo_CMP},
    {"COA", &airline_logo_COA},
    {"CPA", &airline_logo_CPA},
    {"CSA", &airline_logo_CSA},
    {"CSC", &airline_logo_CSC},
    {"CSN", &airline_logo_CSN},
    {"CSZ", &airline_logo_CSZ},
    {"CXA", &airline_logo_CXA},
    {"DAL", &airline_logo_DAL},
    {"DLH", &airline_logo_DLH},
    {"EAL", &airline_logo_EAL},
    {"EDV", &airline_logo_EDV},
    {"EGF", &airline_logo_EGF},
    {"EIN", &airline_logo_EIN},
    {"ELY", &airline_logo_ELY},
    {"ENY", &airline_logo_ENY},
    {"ETD", &airline_logo_ETD},
    {"ETH", &airline_logo_ETH},
    {"EVA", &airline_logo_EVA},
    {"EWG", &airline_logo_EWG},
    {"EZY", &airline_logo_EZY},
    {"FDX", &airline_logo_FDX},
    {"FFT", &airline_logo_FFT},
    {"FIN", &airline_logo_FIN},
    {"FJI", &airline_logo_FJI},
    {"FLG", &airline_logo_FLG},
    {"FWR", &airline_logo_FWR},
    {"GEC", &airline_logo_GEC},
    {"GFA", &airline_logo_GFA},
    {"GIA", &airline_logo_GIA},
    {"GLO", &airline_logo_GLO},
    {"GTI", &airline_logo_GTI},
    {"HAL", &airline_logo_HAL},
    {"HTL", &airline_logo_HTL},
    {"IBE", &airline_logo_IBE},
    {"ICE", &airline_logo_ICE},
    {"JAL", &airline_logo_JAL},
    {"JAT", &airline_logo_JAT},
    {"JBU", &airline_logo_JBU},
    {"JKK", &airline_logo_JKK},
    {"JMC", &airline_logo_JMC},
    {"JSX", &airline_logo_JSX},
    {"JZA", &airline_logo_JZA},
    {"KAL", &airline_logo_KAL},
    {"KLM", &airline_logo_KLM},
    {"LAL", &airline_logo_LAL},
    {"LAN", &airline_logo_LAN},
    {"LDA", &airline_logo_LDA},
    {"LGL", &airline_logo_LGL},
    {"LNI", &airline_logo_LNI},
    {"LOF", &airline_logo_LOF},
    {"LOT", &airline_logo_LOT},
    {"LTD", &airline_logo_LTD},
    {"LTG", &airline_logo_LTG},
    {"LTU", &airline_logo_LTU},
    {"MAS", &airline_logo_MAS},
    {"MEP", &airline_logo_MEP},
    {"MGL", &airline_logo_MGL},
    {"MPG", &airline_logo_MPG},
    {"MPH", &airline_logo_MPH},
    {"MSR", &airline_logo_MSR},
    {"MXA", &airline_logo_MXA},
    {"NGE", &airline_logo_NGE},
    {"NKS", &airline_logo_NKS},
    {"NMB", &airline_logo_NMB},
    {"NRL", &airline_logo_NRL},
    {"NWA", &airline_logo_NWA},
    {"OAL", &airline_logo_OAL},
    {"OZW", &airline_logo_OZW},
    {"PAC", &airline_logo_PAC},
    {"PAL", &airline_logo_PAL},
    {"PGA", &airline_logo_PGA},
    {"PIA", &airline_logo_PIA},
    {"POE", &airline_logo_POE},
    {"PWD", &airline_logo_PWD},
    {"QFA", &airline_logo_QFA},
    {"QTR", &airline_logo_QTR},
    {"ROU", &airline_logo_ROU},
    {"RSP", &airline_logo_RSP},
    {"RVF", &airline_logo_RVF},
    {"RYR", &airline_logo_RYR},
    {"SAA", &airline_logo_SAA},
    {"SAS", &airline_logo_SAS},
    {"SCX", &airline_logo_SCX},
    {"SIA", &airline_logo_SIA},
    {"SKV", &airline_logo_SKV},
    {"SKW", &airline_logo_SKW},
    {"SLI", &airline_logo_SLI},
    {"SLM", &airline_logo_SLM},
    {"SRY", &airline_logo_SRY},
    {"SVA", &airline_logo_SVA},
    {"SWA", &airline_logo_SWA},
    {"SWG", &airline_logo_SWG},
    {"SWR", &airline_logo_SWR},
    {"TAI", &airline_logo_TAI},
    {"TAM", &airline_logo_TAM},
    {"TAP", &airline_logo_TAP},
    {"THA", &airline_logo_THA},
    {"THY", &airline_logo_THY},
    {"TRS", &airline_logo_TRS},
    {"UAE", &airline_logo_UAE},
    {"UAL", &airline_logo_UAL},
    {"USA", &airline_logo_USA},
    {"VIR", &airline_logo_VIR},
    {"VOI", &airline_logo_VOI},
    {"VOZ", &airline_logo_VOZ},
    {"VRD", &airline_logo_VRD},
    {"VRG", &airline_logo_VRG},
    {"WJA", &airline_logo_WJA}};

const airline_t *lookupAirline(const char *iata_airline)
{
    log_d("Looking up airline %s", iata_airline);
    constexpr size_t airline_size = sizeof(airlines) / sizeof(airlines[0]);
    // Array must be sorted on item to lookup
    return binary_array_lookup<airline_t, const char *>((airline_t *)airlines, airline_size, iata_airline, [](const airline_t &other, const char *value)
                                                        { return strcmp(other.iata_airline, value); });
}